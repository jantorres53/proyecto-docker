-- MySQL Script generated by MySQL Workbench
-- Sat Jun 22 11:10:48 2024
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Schema agenda
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `agenda` ;

-- -----------------------------------------------------
-- Schema agenda
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `agenda` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci ;
USE `agenda` ;

-- -----------------------------------------------------
-- Table `agenda`.`empresa`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `agenda`.`empresa` ;

CREATE TABLE IF NOT EXISTS `agenda`.`empresa` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 4
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `agenda`.`area`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `agenda`.`area` ;

CREATE TABLE IF NOT EXISTS `agenda`.`area` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(50) NULL DEFAULT NULL,
  `descripcion` VARCHAR(500) NULL DEFAULT NULL,
  `empresaFk` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_area_empresa1_idx` (`empresaFk` ASC) VISIBLE,
  CONSTRAINT `fk_area_empresa1`
    FOREIGN KEY (`empresaFk`)
    REFERENCES `agenda`.`empresa` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 4
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;

-- -----------------------------------------------------
-- Table `agenda`.`rol`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `agenda`.`rol` ;

CREATE TABLE IF NOT EXISTS `agenda`.`rol` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(20) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 4
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `agenda`.`usuario`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `agenda`.`usuario` ;

CREATE TABLE IF NOT EXISTS `agenda`.`usuario` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(50) NULL DEFAULT NULL,
  `apePaterno` VARCHAR(50) NULL DEFAULT NULL,
  `apeMaterno` VARCHAR(50) NULL DEFAULT NULL,
  `email` VARCHAR(50) NULL DEFAULT NULL,
  `password` VARCHAR(20) NULL DEFAULT NULL,
  `telefono` VARCHAR(10) NULL DEFAULT NULL,
  `fechaNac` DATE NULL DEFAULT NULL,
  `rolFk` INT NOT NULL,
  `empresaFk` INT NULL,
  `areaFk` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_usuario_rol1_idx` (`rolFk` ASC) VISIBLE,
  INDEX `fk_usuario_empresa1_idx` (`empresaFk` ASC) VISIBLE,
  INDEX `fk_usuario_area1_idx` (`areaFk` ASC) VISIBLE,
  CONSTRAINT `fk_usuario_area1`
    FOREIGN KEY (`areaFk`)
    REFERENCES `agenda`.`area` (`id`),
  CONSTRAINT `fk_usuario_empresa1`
    FOREIGN KEY (`empresaFk`)
    REFERENCES `agenda`.`empresa` (`id`),
  CONSTRAINT `fk_usuario_rol1`
    FOREIGN KEY (`rolFk`)
    REFERENCES `agenda`.`rol` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 6
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `agenda`.`mantenimiento`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `agenda`.`mantenimiento` ;

CREATE TABLE IF NOT EXISTS `agenda`.`mantenimiento` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(150) NULL DEFAULT NULL,
  `descripcion` VARCHAR(500) NULL DEFAULT NULL,
  `direccion` VARCHAR(500) NOT NULL,
  `fechaRegistro` DATE NULL DEFAULT NULL,
  `aceptado` TINYINT NULL DEFAULT NULL,
  `costo` FLOAT NULL DEFAULT NULL,
  `estadoPago` VARCHAR(50) NULL DEFAULT NULL,
  `finalizado` TINYINT NULL DEFAULT NULL,
  `fechaFin` DATE NULL DEFAULT NULL,
  `usuarioFk` INT NOT NULL,
  `areaFk` INT NOT NULL,
  `empleadoFk` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_mantenimiento_usuario1_idx` (`usuarioFk` ASC) VISIBLE,
  INDEX `fk_mantenimiento_area1_idx` (`areaFk` ASC) VISIBLE,
  INDEX `fk_mantenimiento_usuario2_idx` (`empleadoFk` ASC) VISIBLE,
  CONSTRAINT `fk_mantenimiento_area1`
    FOREIGN KEY (`areaFk`)
    REFERENCES `agenda`.`area` (`id`),
  CONSTRAINT `fk_mantenimiento_usuario1`
    FOREIGN KEY (`usuarioFk`)
    REFERENCES `agenda`.`usuario` (`id`),
  CONSTRAINT `fk_mantenimiento_usuario2`
    FOREIGN KEY (`empleadoFk`)
    REFERENCES `agenda`.`usuario` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `agenda`.`comentario`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `agenda`.`comentario` ;

CREATE TABLE IF NOT EXISTS `agenda`.`comentario` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `descripcion` VARCHAR(500) NULL DEFAULT NULL,
  `fecha` DATE NULL DEFAULT NULL,
  `mantenimientoFk` INT NOT NULL,
  `usuarioFk` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_comentario_mantenimiento1_idx` (`mantenimientoFk` ASC) VISIBLE,
  INDEX `fk_comentario_usuario1_idx` (`usuarioFk` ASC) VISIBLE,
  CONSTRAINT `fk_comentario_mantenimiento1`
    FOREIGN KEY (`mantenimientoFk`)
    REFERENCES `agenda`.`mantenimiento` (`id`),
  CONSTRAINT `fk_comentario_usuario1`
    FOREIGN KEY (`usuarioFk`)
    REFERENCES `agenda`.`usuario` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 3
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;


-- Datos de prueba para la tabla `empresa`
INSERT INTO `agenda`.`empresa` (`id`, `nombre`) VALUES (1, 'Empresa A');
INSERT INTO `agenda`.`empresa` (`id`, `nombre`) VALUES (2, 'Empresa B');

-- Datos de prueba para la tabla `area`
INSERT INTO `agenda`.`area` (`id`, `nombre`, `empresaFk`) VALUES (1, 'Área 1', 1);
INSERT INTO `agenda`.`area` (`id`, `nombre`, `empresaFk`) VALUES (2, 'Área 2', 2);

-- Datos de prueba para la tabla `rol`
INSERT INTO `agenda`.`rol` (`id`, `nombre`) VALUES (1, 'Administrador');
INSERT INTO `agenda`.`rol` (`id`, `nombre`) VALUES (2, 'Empleado');
INSERT INTO `agenda`.`rol` (`id`, `nombre`) VALUES (3, 'Cliente');

-- Datos de prueba para la tabla `usuario`
INSERT INTO `agenda`.`usuario` (`id`, `nombre`, `apePaterno`, `apeMaterno`, `email`, `password`, `telefono`, `fechaNac`, `rolFk`, `empresaFk`, `areaFk`) VALUES (1, 'Juan', 'Pérez', 'García', 'rojassanchezo63@gmail.com', 'password123', '5551234567', '1980-01-01', 1, 1, NULL);
INSERT INTO `agenda`.`usuario` (`id`, `nombre`, `apePaterno`, `apeMaterno`, `email`, `password`, `telefono`, `fechaNac`, `rolFk`, `empresaFk`, `areaFk`) VALUES (2, 'Ana', 'López', 'Martínez', 'ana.lopez@example.com', 'password123', '5559876543', '1990-02-02', 2, 2, 2);
INSERT INTO `agenda`.`usuario` (`id`, `nombre`, `apePaterno`, `apeMaterno`, `email`, `password`, `telefono`, `fechaNac`, `rolFk`, `empresaFk`, `areaFk`) VALUES (3, 'Carlos', 'Gómez', 'Rodríguez', 'carlos.gomez@example.com', 'password123', '5551122334', '1985-03-03', 3, NULL, NULL);
INSERT INTO `agenda`.`usuario` (`id`, `nombre`, `apePaterno`, `apeMaterno`, `email`, `password`, `telefono`, `fechaNac`, `rolFk`, `empresaFk`, `areaFk`) VALUES (4, 'María', 'Hernández', 'Sánchez', 'maria.hernandez@example.com', 'password123', '5554433221', '1995-04-04', 3, NULL, NULL);

-- Datos de prueba para la tabla `mantenimiento`
INSERT INTO `agenda`.`mantenimiento` (`id`, `nombre`, `descripcion`, `direccion`, `fechaRegistro`, `aceptado`, `costo`, `estadoPago`, `finalizado`, `fechaFin`, `usuarioFk`, `areaFk`, `empleadoFk`) VALUES (1, 'Mantenimiento 1', 'Descripción del mantenimiento 1', 'Dirección 1', '2024-06-20', 1, 100.0, 'Pagado', 0, NULL, 3, 1, 2);
INSERT INTO `agenda`.`mantenimiento` (`id`, `nombre`, `descripcion`, `direccion`, `fechaRegistro`, `aceptado`, `costo`, `estadoPago`, `finalizado`, `fechaFin`, `usuarioFk`, `areaFk`, `empleadoFk`) VALUES (2, 'Mantenimiento 2', 'Descripción del mantenimiento 2', 'Dirección 2', '2024-06-21', 1, 200.0, 'Pendiente', 1, '2024-06-30', 4, 2, 2);
INSERT INTO `agenda`.`mantenimiento` (`id`, `nombre`, `descripcion`, `direccion`, `fechaRegistro`, `aceptado`, `costo`, `estadoPago`, `finalizado`, `fechaFin`, `usuarioFk`, `areaFk`, `empleadoFk`) VALUES (3, 'Mantenimiento 3', 'Descripción del mantenimiento 3', 'Dirección 3', '2024-06-28', 1, 100.0, 'Pagado', 1, '2024-06-28', 3, 1, 2);
INSERT INTO `agenda`.`mantenimiento` (`id`, `nombre`, `descripcion`, `direccion`, `fechaRegistro`, `aceptado`, `costo`, `estadoPago`, `finalizado`, `fechaFin`, `usuarioFk`, `areaFk`, `empleadoFk`) VALUES (4, 'Mantenimiento 4', 'Descripción del mantenimiento 4', 'Dirección 4', '2024-06-19', 1, 200.0, 'Pendiente', NULL, NULL, 4, 2, 2);
INSERT INTO `agenda`.`mantenimiento` (`id`, `nombre`, `descripcion`, `direccion`, `fechaRegistro`, `aceptado`, `costo`, `estadoPago`, `finalizado`, `fechaFin`, `usuarioFk`, `areaFk`, `empleadoFk`) VALUES (5, 'Mantenimiento 5', 'Descripción del mantenimiento 5', 'Dirección 5', '2024-06-19', 0, 200.0, 'Pendiente', 1, '2024-06-12', 4, 2, 2);
INSERT INTO `agenda`.`mantenimiento` (`id`, `nombre`, `descripcion`, `direccion`, `fechaRegistro`, `aceptado`, `costo`, `estadoPago`, `finalizado`, `fechaFin`, `usuarioFk`, `areaFk`, `empleadoFk`) VALUES (6, 'Mantenimiento 6', 'Descripción del mantenimiento 6', 'Dirección 6', '2024-06-16', NULL, NULL, NULL, NULL, NULL, 4, 2, 2);

-- Datos de prueba para la tabla `comentario`
INSERT INTO `agenda`.`comentario` (`id`, `descripcion`, `fecha`, `mantenimientoFk`, `usuarioFk`) VALUES (1, 'Comentario 1 para Mantenimiento 1', '2024-06-22', 1, 3);
INSERT INTO `agenda`.`comentario` (`id`, `descripcion`, `fecha`, `mantenimientoFk`, `usuarioFk`) VALUES (2, 'Comentario 2 para Mantenimiento 2', '2024-06-22', 2, 4);
